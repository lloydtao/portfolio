{"_path":"/blog/nuxt/adding-vitest-to-nuxt-3-tutorial-unit-testing","_dir":"nuxt","_draft":false,"_partial":false,"_locale":"","title":"Adding Vitest to Nuxt 3 âš¡ (2023)","description":"Getting started with Vitest for blazing-fast unit tests.","slug":"adding-vitest-to-nuxt-3-tutorial-unit-testing","subtitle":"","series":"Nuxt 3","localimage":"/images/nuxt-vitest-16-9.png","cover_image":"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wlnkh4kjkjq6u0yqz54e.png","publishedAt":"2023-01-05T09:00:00.000Z","tags":"nuxt, nuxt3, vitest, testing","published":true,"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this post, we'll introduce Vitest for blazing-fast unit tests in your Nuxt 3 project."}]},{"type":"element","tag":"h2","props":{"id":"testing"},"children":[{"type":"text","value":"Testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unit tests are important for ensuring that your code is working correctly."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is especially important when making changes to your code, as you can ensure that you haven't introduced any new bugs or problems to existing features. Or, at least to the extent that these features have been covered by tests."}]},{"type":"element","tag":"h3","props":{"id":"vitest"},"children":[{"type":"text","value":"Vitest"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vitest is a test runner based on Vite, an alternative module bundler to webpack which Nuxt 3 uses by default."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's incredibly similar to "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Jest"}]},{"type":"text","value":", and often considered a drop-in replacement for it."}]},{"type":"element","tag":"h2","props":{"id":"installation"},"children":[{"type":"text","value":"Installation"}]},{"type":"element","tag":"h3","props":{"id":"packages"},"children":[{"type":"text","value":"Packages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install the following dependencies:"}]},{"type":"element","tag":"pre","props":{"className":["language-sh"],"code":"# Vitest\nyarn add --dev vitest jsdom @vitejs/plugin-vue\n\n# Test utils\nyarn add --dev @vue/test-utils @nuxt/test-utils\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# Vitest\nyarn add --dev vitest jsdom @vitejs/plugin-vue\n\n# Test utils\nyarn add --dev @vue/test-utils @nuxt/test-utils\n"}]}]},{"type":"element","tag":"h3","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create your Vitest configuration file ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"vitest.config.js"}]},{"type":"text","value":"):"}]},{"type":"element","tag":"pre","props":{"className":["language-ts"],"code":"// vitest.config.js\n\nimport { defineConfig } from \"vite\";\nimport vue from \"@vitejs/plugin-vue\";\n\nexport default defineConfig({\n  plugins: [vue()],\n  test: {\n    globals: true,\n    environment: \"jsdom\",\n  },\n});\n","language":"ts","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// vitest.config.js\n\nimport { defineConfig } from \"vite\";\nimport vue from \"@vitejs/plugin-vue\";\n\nexport default defineConfig({\n  plugins: [vue()],\n  test: {\n    globals: true,\n    environment: \"jsdom\",\n  },\n});\n"}]}]},{"type":"element","tag":"h3","props":{"id":"eslint-integration"},"children":[{"type":"text","value":"ESLint integration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you're using ESLint from earlier in the series, you should also add its Vitest plugin:"}]},{"type":"element","tag":"pre","props":{"className":["language-sh"],"code":"yarn add --dev eslint-plugin-vitest\n","language":"sh","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn add --dev eslint-plugin-vitest\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then, modify your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".eslintrc.cjs"}]},{"type":"text","value":" file to add the plugin:"}]},{"type":"element","tag":"pre","props":{"className":["language-ts"],"code":"// .eslintrc.cjs\n\nmodule.exports = {\n  // ...\n  plugins: [\"vitest\"],\n  // ...\n};\n","language":"ts","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// .eslintrc.cjs\n\nmodule.exports = {\n  // ...\n  plugins: [\"vitest\"],\n  // ...\n};\n"}]}]},{"type":"element","tag":"h3","props":{"id":"scripts"},"children":[{"type":"text","value":"Scripts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Add the following script to your project:"}]},{"type":"element","tag":"pre","props":{"className":["language-json"],"code":"// package.json\n\n{\n  // ...\n  \"scripts\": {\n    // ...\n    \"test\": \"vitest\"\n    // ...\n  }\n  // ...\n}\n","language":"json","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// package.json\n\n{\n  // ...\n  \"scripts\": {\n    // ...\n    \"test\": \"vitest\"\n    // ...\n  }\n  // ...\n}\n"}]}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"h3","props":{"id":"creating-tests"},"children":[{"type":"text","value":"Creating tests"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At this point, you should use a learning resource such as "},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=cM_AeQHzlGg","rel":["nofollow"]},"children":[{"type":"text","value":"Testing with Vitest"}]},{"type":"text","value":" to get started."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A test may look something like this:"}]},{"type":"element","tag":"pre","props":{"className":["language-ts"],"code":"// tests/HelloWorld.spec.ts\nimport { describe, it, expect } from \"vitest\";\nimport { mount } from \"@vue/test-utils\";\n\nimport HelloWorld from \"../components/HelloWorld.vue\";\n\ndescribe(\"HelloWorld\", () => {\n  it(\"is a Vue instance\", () => {\n    const wrapper = mount(HelloWorld);\n    expect(wrapper.vm).toBeTruthy();\n  });\n});\n","language":"ts","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// tests/HelloWorld.spec.ts\nimport { describe, it, expect } from \"vitest\";\nimport { mount } from \"@vue/test-utils\";\n\nimport HelloWorld from \"../components/HelloWorld.vue\";\n\ndescribe(\"HelloWorld\", () => {\n  it(\"is a Vue instance\", () => {\n    const wrapper = mount(HelloWorld);\n    expect(wrapper.vm).toBeTruthy();\n  });\n});\n"}]}]},{"type":"element","tag":"h3","props":{"id":"running-tests"},"children":[{"type":"text","value":"Running tests"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To run your unit tests, use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"yarn test"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"$ yarn test\n\n>>> yarn run v1.22.5\n>>> $ vitest\n>>>\n>>>  DEV  v0.26.3 ~/Documents/GitHub/nuxt-app\n>>>\n>>>  âœ“ tests/HelloWorld.spec.ts (1)\n>>>\n>>>  Test Files  1 passed (1)\n>>>       Tests  1 passed (1)\n>>>    Start at  23:19:54\n>>>    Duration  1.78s (transform 538ms, setup 1ms, collect 154ms, tests 20ms)\n>>>\n>>>\n>>>  PASS  Waiting for file changes...\n>>>        press h to show help, press q to quit\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$ yarn test\n\n>>> yarn run v1.22.5\n>>> $ vitest\n>>>\n>>>  DEV  v0.26.3 ~/Documents/GitHub/nuxt-app\n>>>\n>>>  âœ“ tests/HelloWorld.spec.ts (1)\n>>>\n>>>  Test Files  1 passed (1)\n>>>       Tests  1 passed (1)\n>>>    Start at  23:19:54\n>>>    Duration  1.78s (transform 538ms, setup 1ms, collect 154ms, tests 20ms)\n>>>\n>>>\n>>>  PASS  Waiting for file changes...\n>>>        press h to show help, press q to quit\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All done!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now you can start shipping new features in peace ðŸ˜‰"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hey, guys! Thank you for reading. I hope that you enjoyed this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Keep up to date with me:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Website: "},{"type":"element","tag":"a","props":{"href":"https://lloyd.cx/","rel":["nofollow"]},"children":[{"type":"text","value":"https://lloyd.cx/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Twitter: "},{"type":"element","tag":"a","props":{"href":"https://twitter.com/lloydtao/","rel":["nofollow"]},"children":[{"type":"text","value":"https://twitter.com/lloydtao/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"GitHub: "},{"type":"element","tag":"a","props":{"href":"https://github.com/lloydtao/","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/lloydtao/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"LinkedIn: "},{"type":"element","tag":"a","props":{"href":"https://www.linkedin.com/in/lloydtao/","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.linkedin.com/in/lloydtao/"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"introduction","depth":2,"text":"Introduction"},{"id":"testing","depth":2,"text":"Testing","children":[{"id":"vitest","depth":3,"text":"Vitest"}]},{"id":"installation","depth":2,"text":"Installation","children":[{"id":"packages","depth":3,"text":"Packages"},{"id":"configuration","depth":3,"text":"Configuration"},{"id":"eslint-integration","depth":3,"text":"ESLint integration"},{"id":"scripts","depth":3,"text":"Scripts"}]},{"id":"usage","depth":2,"text":"Usage","children":[{"id":"creating-tests","depth":3,"text":"Creating tests"},{"id":"running-tests","depth":3,"text":"Running tests"}]}]}},"_type":"markdown","_id":"content:blog:nuxt:adding-vitest-to-nuxt-3-tutorial-unit-testing.md","_source":"content","_file":"blog/nuxt/adding-vitest-to-nuxt-3-tutorial-unit-testing.md","_extension":"md"}